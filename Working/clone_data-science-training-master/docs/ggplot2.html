<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Visualizing: ggplot2 | Introduction to Open Data Science</title>
  <meta name="description" content="This is official open data science training for the Ocean Health Index." />
  <meta name="generator" content="bookdown 0.11 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Visualizing: ggplot2 | Introduction to Open Data Science" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is official open data science training for the Ocean Health Index." />
  <meta name="github-repo" content="ohi-science/data-science-training" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Visualizing: ggplot2 | Introduction to Open Data Science" />
  
  <meta name="twitter:description" content="This is official open data science training for the Ocean Health Index." />
  

<meta name="author" content="The Ocean Health Index Team" />


<meta name="date" content="2019-06-19" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="github.html">
<link rel="next" href="dplyr.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="lib/css/bootstrap.min.css" type="text/css" />
<link rel="stylesheet" href="lib/css/style.css" type="text/css" />
<link rel="stylesheet" href="lib/css/lesson.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">OHI Data Science Training</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Welcome</a></li>
<li class="chapter" data-level="2" data-path="overview.html"><a href="overview.html"><i class="fa fa-check"></i><b>2</b> Overview</a><ul>
<li class="chapter" data-level="2.1" data-path="overview.html"><a href="overview.html#what-to-expect"><i class="fa fa-check"></i><b>2.1</b> What to expect</a></li>
<li class="chapter" data-level="2.2" data-path="overview.html"><a href="overview.html#what-youll-learn"><i class="fa fa-check"></i><b>2.2</b> What you’ll learn</a><ul>
<li class="chapter" data-level="2.2.1" data-path="overview.html"><a href="overview.html#tidy-data-workflow"><i class="fa fa-check"></i><b>2.2.1</b> Tidy data workflow</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="overview.html"><a href="overview.html#learning-with-data-that-are-not-your-own"><i class="fa fa-check"></i><b>2.3</b> Learning with data that are not your own</a></li>
<li class="chapter" data-level="2.4" data-path="overview.html"><a href="overview.html#emphasizing-collaboration"><i class="fa fa-check"></i><b>2.4</b> Emphasizing collaboration</a></li>
<li class="chapter" data-level="2.5" data-path="overview.html"><a href="overview.html#by-the-end-of-the-course"><i class="fa fa-check"></i><b>2.5</b> By the end of the course…</a></li>
<li class="chapter" data-level="2.6" data-path="overview.html"><a href="overview.html#prerequisites"><i class="fa fa-check"></i><b>2.6</b> Prerequisites</a></li>
<li class="chapter" data-level="2.7" data-path="overview.html"><a href="overview.html#credit"><i class="fa fa-check"></i><b>2.7</b> Credit</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="rstudio.html"><a href="rstudio.html"><i class="fa fa-check"></i><b>3</b> R &amp; RStudio, RMarkdown</a><ul>
<li class="chapter" data-level="3.1" data-path="rstudio.html"><a href="rstudio.html#objectives-resources"><i class="fa fa-check"></i><b>3.1</b> Objectives &amp; Resources</a><ul>
<li class="chapter" data-level="3.1.1" data-path="rstudio.html"><a href="rstudio.html#objectives"><i class="fa fa-check"></i><b>3.1.1</b> Objectives</a></li>
<li class="chapter" data-level="3.1.2" data-path="rstudio.html"><a href="rstudio.html#resources"><i class="fa fa-check"></i><b>3.1.2</b> Resources</a></li>
<li class="chapter" data-level="3.1.3" data-path="rstudio.html"><a href="rstudio.html#data-and-packages"><i class="fa fa-check"></i><b>3.1.3</b> Data and packages</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="rstudio.html"><a href="rstudio.html#why-learn-r-with-rstudio"><i class="fa fa-check"></i><b>3.2</b> Why learn R with RStudio</a></li>
<li class="chapter" data-level="3.3" data-path="rstudio.html"><a href="rstudio.html#r-at-the-console-rstudio-goodies"><i class="fa fa-check"></i><b>3.3</b> R at the console, RStudio goodies</a><ul>
<li class="chapter" data-level="3.3.1" data-path="rstudio.html"><a href="rstudio.html#error-messages-are-your-friends"><i class="fa fa-check"></i><b>3.3.1</b> Error messages are your friends</a></li>
<li class="chapter" data-level="3.3.2" data-path="rstudio.html"><a href="rstudio.html#logical-operators-and-expressions"><i class="fa fa-check"></i><b>3.3.2</b> Logical operators and expressions</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="rstudio.html"><a href="rstudio.html#your-turn"><i class="fa fa-check"></i><b>3.4</b> Your Turn</a></li>
<li class="chapter" data-level="3.5" data-path="rstudio.html"><a href="rstudio.html#r-functions-help-pages"><i class="fa fa-check"></i><b>3.5</b> R functions, help pages</a><ul>
<li class="chapter" data-level="3.5.1" data-path="rstudio.html"><a href="rstudio.html#your-turn-1"><i class="fa fa-check"></i><b>3.5.1</b> Your turn</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="rstudio.html"><a href="rstudio.html#packages"><i class="fa fa-check"></i><b>3.6</b> Packages</a></li>
<li class="chapter" data-level="3.7" data-path="rstudio.html"><a href="rstudio.html#clearing-the-environment"><i class="fa fa-check"></i><b>3.7</b> Clearing the environment</a><ul>
<li class="chapter" data-level="3.7.1" data-path="rstudio.html"><a href="rstudio.html#your-turn-2"><i class="fa fa-check"></i><b>3.7.1</b> Your turn</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="rstudio.html"><a href="rstudio.html#rmarkdown"><i class="fa fa-check"></i><b>3.8</b> RMarkdown</a><ul>
<li class="chapter" data-level="3.8.1" data-path="rstudio.html"><a href="rstudio.html#your-turn-3"><i class="fa fa-check"></i><b>3.8.1</b> Your Turn</a></li>
<li class="chapter" data-level="3.8.2" data-path="rstudio.html"><a href="rstudio.html#code-chunks"><i class="fa fa-check"></i><b>3.8.2</b> Code chunks</a></li>
<li class="chapter" data-level="3.8.3" data-path="rstudio.html"><a href="rstudio.html#your-turn-4"><i class="fa fa-check"></i><b>3.8.3</b> Your turn</a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="rstudio.html"><a href="rstudio.html#rmarkdown-video-1-minute"><i class="fa fa-check"></i><b>3.9</b> RMarkdown video (1-minute)</a></li>
<li class="chapter" data-level="3.10" data-path="rstudio.html"><a href="rstudio.html#troubleshooting"><i class="fa fa-check"></i><b>3.10</b> Troubleshooting</a><ul>
<li class="chapter" data-level="3.10.1" data-path="rstudio.html"><a href="rstudio.html#i-entered-a-command-and-nothings-happening"><i class="fa fa-check"></i><b>3.10.1</b> I entered a command and nothing’s happening</a></li>
<li class="chapter" data-level="3.10.2" data-path="rstudio.html"><a href="rstudio.html#how-do-i-update-rstudio"><i class="fa fa-check"></i><b>3.10.2</b> How do I update RStudio?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="github.html"><a href="github.html"><i class="fa fa-check"></i><b>4</b> GitHub</a><ul>
<li class="chapter" data-level="4.1" data-path="github.html"><a href="github.html#objectives-1"><i class="fa fa-check"></i><b>4.1</b> Objectives</a></li>
<li class="chapter" data-level="4.2" data-path="github.html"><a href="github.html#what-are-git-and-github"><i class="fa fa-check"></i><b>4.2</b> What are Git and Github?</a></li>
<li class="chapter" data-level="4.3" data-path="github.html"><a href="github.html#why-should-scientists-use-github"><i class="fa fa-check"></i><b>4.3</b> Why should scientists use GitHub?</a></li>
<li class="chapter" data-level="4.4" data-path="github.html"><a href="github.html#resources-1"><i class="fa fa-check"></i><b>4.4</b> Resources</a></li>
<li class="chapter" data-level="4.5" data-path="github.html"><a href="github.html#lets-get-started"><i class="fa fa-check"></i><b>4.5</b> Let’s get started</a><ul>
<li class="chapter" data-level="4.5.1" data-path="github.html"><a href="github.html#some-github-terminology"><i class="fa fa-check"></i><b>4.5.1</b> Some Github terminology</a></li>
<li class="chapter" data-level="4.5.2" data-path="github.html"><a href="github.html#setup-git-github"><i class="fa fa-check"></i><b>4.5.2</b> Setup Git &amp; GitHub</a></li>
<li class="chapter" data-level="4.5.3" data-path="github.html"><a href="github.html#create-a-repository-on-github.com"><i class="fa fa-check"></i><b>4.5.3</b> Create a repository on Github.com</a></li>
<li class="chapter" data-level="4.5.4" data-path="github.html"><a href="github.html#clone-your-repository-using-rstudio"><i class="fa fa-check"></i><b>4.5.4</b> Clone your repository using RStudio</a></li>
<li class="chapter" data-level="4.5.5" data-path="github.html"><a href="github.html#inspect-results"><i class="fa fa-check"></i><b>4.5.5</b> Inspect results</a></li>
<li class="chapter" data-level="4.5.6" data-path="github.html"><a href="github.html#add-files-to-our-local-repo"><i class="fa fa-check"></i><b>4.5.6</b> Add files to our local repo</a></li>
<li class="chapter" data-level="4.5.7" data-path="github.html"><a href="github.html#committing-your-changes-and-syncing-with-github.com"><i class="fa fa-check"></i><b>4.5.7</b> Committing your changes and syncing with GitHub.com</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="github.html"><a href="github.html#explore-remote-github"><i class="fa fa-check"></i><b>4.6</b> Explore remote Github</a></li>
<li class="chapter" data-level="4.7" data-path="github.html"><a href="github.html#going-back-in-time"><i class="fa fa-check"></i><b>4.7</b> Going back in time</a></li>
<li class="chapter" data-level="4.8" data-path="github.html"><a href="github.html#happy-git-with-r"><i class="fa fa-check"></i><b>4.8</b> Happy Git with R</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="ggplot2.html"><a href="ggplot2.html"><i class="fa fa-check"></i><b>5</b> Visualizing: <code>ggplot2</code></a><ul>
<li class="chapter" data-level="5.1" data-path="ggplot2.html"><a href="ggplot2.html#why-ggplot2"><i class="fa fa-check"></i><b>5.1</b> Why ggplot2?</a></li>
<li class="chapter" data-level="5.2" data-path="ggplot2.html"><a href="ggplot2.html#additional-resources-for-data-visualization-in-r"><i class="fa fa-check"></i><b>5.2</b> Additional resources for data visualization in R</a></li>
<li class="chapter" data-level="5.3" data-path="ggplot2.html"><a href="ggplot2.html#objectives-2"><i class="fa fa-check"></i><b>5.3</b> Objectives</a></li>
<li class="chapter" data-level="5.4" data-path="ggplot2.html"><a href="ggplot2.html#install-tidyverse-tidyverse"><i class="fa fa-check"></i><b>5.4</b> Install tidyverse: <code>tidyverse</code></a></li>
<li class="chapter" data-level="5.5" data-path="ggplot2.html"><a href="ggplot2.html#create-an-rmarkdown-file-to-work-from"><i class="fa fa-check"></i><b>5.5</b> Create an RMarkdown file to work from</a></li>
<li class="chapter" data-level="5.6" data-path="ggplot2.html"><a href="ggplot2.html#load-the-tidverse"><i class="fa fa-check"></i><b>5.6</b> Load the tidverse</a></li>
<li class="chapter" data-level="5.7" data-path="ggplot2.html"><a href="ggplot2.html#load-and-explore-data"><i class="fa fa-check"></i><b>5.7</b> Load and explore data</a></li>
<li class="chapter" data-level="5.8" data-path="ggplot2.html"><a href="ggplot2.html#plotting-with-ggplot2"><i class="fa fa-check"></i><b>5.8</b> Plotting with <strong><code>ggplot2</code></strong></a><ul>
<li class="chapter" data-level="5.8.1" data-path="ggplot2.html"><a href="ggplot2.html#step-1-identify-the-dataframe"><i class="fa fa-check"></i><b>5.8.1</b> Step 1: Identify the dataframe</a></li>
<li class="chapter" data-level="5.8.2" data-path="ggplot2.html"><a href="ggplot2.html#step-2-identify-the-style-of-plot-you-want-to-create-i.e.-the-geom"><i class="fa fa-check"></i><b>5.8.2</b> Step 2: Identify the style of plot you want to create (i.e., the geom)</a></li>
<li class="chapter" data-level="5.8.3" data-path="ggplot2.html"><a href="ggplot2.html#step-3-customize-your-plot"><i class="fa fa-check"></i><b>5.8.3</b> Step 3: Customize your plot</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="ggplot2.html"><a href="ggplot2.html#saving-plots"><i class="fa fa-check"></i><b>5.9</b> Saving plots</a></li>
<li class="chapter" data-level="5.10" data-path="ggplot2.html"><a href="ggplot2.html#arranging-plots"><i class="fa fa-check"></i><b>5.10</b> Arranging plots</a></li>
<li class="chapter" data-level="5.11" data-path="ggplot2.html"><a href="ggplot2.html#interactive-plots"><i class="fa fa-check"></i><b>5.11</b> Interactive plots</a></li>
<li class="chapter" data-level="5.12" data-path="ggplot2.html"><a href="ggplot2.html#save-and-push-to-github"><i class="fa fa-check"></i><b>5.12</b> Save and push to GitHub</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="dplyr.html"><a href="dplyr.html"><i class="fa fa-check"></i><b>6</b> Data Wrangling: <code>dplyr</code></a><ul>
<li class="chapter" data-level="6.1" data-path="dplyr.html"><a href="dplyr.html#objectives-resources-1"><i class="fa fa-check"></i><b>6.1</b> Objectives &amp; Resources</a><ul>
<li class="chapter" data-level="6.1.1" data-path="dplyr.html"><a href="dplyr.html#objectives-3"><i class="fa fa-check"></i><b>6.1.1</b> Objectives</a></li>
<li class="chapter" data-level="6.1.2" data-path="dplyr.html"><a href="dplyr.html#resources-2"><i class="fa fa-check"></i><b>6.1.2</b> Resources</a></li>
<li class="chapter" data-level="6.1.3" data-path="dplyr.html"><a href="dplyr.html#data-and-packages-1"><i class="fa fa-check"></i><b>6.1.3</b> Data and packages</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="dplyr.html"><a href="dplyr.html#tidy-data"><i class="fa fa-check"></i><b>6.2</b> Tidy Data</a><ul>
<li class="chapter" data-level="6.2.1" data-path="dplyr.html"><a href="dplyr.html#setup"><i class="fa fa-check"></i><b>6.2.1</b> Setup</a></li>
<li class="chapter" data-level="6.2.2" data-path="dplyr.html"><a href="dplyr.html#load-tidyverse-which-has-dplyr-inside"><i class="fa fa-check"></i><b>6.2.2</b> load <code>tidyverse</code> (which has <code>dplyr</code> inside)</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="dplyr.html"><a href="dplyr.html#explore-the-gapminder-data.frame"><i class="fa fa-check"></i><b>6.3</b> Explore the gapminder data.frame</a><ul>
<li class="chapter" data-level="6.3.1" data-path="dplyr.html"><a href="dplyr.html#read-data-with-readrread_csv"><i class="fa fa-check"></i><b>6.3.1</b> read data with <code>readr::read_csv()</code></a></li>
<li class="chapter" data-level="6.3.2" data-path="dplyr.html"><a href="dplyr.html#look-at-the-variables-inside-a-data.frame"><i class="fa fa-check"></i><b>6.3.2</b> Look at the variables inside a data.frame</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="dplyr.html"><a href="dplyr.html#dplyr-basics"><i class="fa fa-check"></i><b>6.4</b> <code>dplyr</code> basics</a></li>
<li class="chapter" data-level="6.5" data-path="dplyr.html"><a href="dplyr.html#filter-subsets-data-row-wise-observations."><i class="fa fa-check"></i><b>6.5</b> <code>filter()</code> subsets data row-wise (observations).</a></li>
<li class="chapter" data-level="6.6" data-path="dplyr.html"><a href="dplyr.html#your-turn-5"><i class="fa fa-check"></i><b>6.6</b> Your turn</a><ul>
<li class="chapter" data-level="6.6.1" data-path="dplyr.html"><a href="dplyr.html#answer"><i class="fa fa-check"></i><b>6.6.1</b> Answer</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="dplyr.html"><a href="dplyr.html#select-subsets-data-column-wise-variables"><i class="fa fa-check"></i><b>6.7</b> <code>select()</code> subsets data column-wise (variables)</a></li>
<li class="chapter" data-level="6.8" data-path="dplyr.html"><a href="dplyr.html#use-select-and-filter-together"><i class="fa fa-check"></i><b>6.8</b> Use <code>select()</code> and <code>filter()</code> together</a></li>
<li class="chapter" data-level="6.9" data-path="dplyr.html"><a href="dplyr.html#meet-the-new-pipe-operator"><i class="fa fa-check"></i><b>6.9</b> Meet the new pipe <code>%&gt;%</code> operator</a><ul>
<li class="chapter" data-level="6.9.1" data-path="dplyr.html"><a href="dplyr.html#revel-in-the-convenience"><i class="fa fa-check"></i><b>6.9.1</b> Revel in the convenience</a></li>
</ul></li>
<li class="chapter" data-level="6.10" data-path="dplyr.html"><a href="dplyr.html#mutate-adds-new-variables"><i class="fa fa-check"></i><b>6.10</b> <code>mutate()</code> adds new variables</a><ul>
<li class="chapter" data-level="6.10.1" data-path="dplyr.html"><a href="dplyr.html#your-turn-6"><i class="fa fa-check"></i><b>6.10.1</b> Your turn</a></li>
</ul></li>
<li class="chapter" data-level="6.11" data-path="dplyr.html"><a href="dplyr.html#group_by-operates-on-groups"><i class="fa fa-check"></i><b>6.11</b> <code>group_by()</code> operates on groups</a><ul>
<li class="chapter" data-level="6.11.1" data-path="dplyr.html"><a href="dplyr.html#summarize-with-group_by"><i class="fa fa-check"></i><b>6.11.1</b> <code>summarize()</code> with <code>group_by()</code></a></li>
</ul></li>
<li class="chapter" data-level="6.12" data-path="dplyr.html"><a href="dplyr.html#arrange-orders-columns"><i class="fa fa-check"></i><b>6.12</b> <code>arrange()</code> orders columns</a><ul>
<li class="chapter" data-level="6.12.1" data-path="dplyr.html"><a href="dplyr.html#your-turn-7"><i class="fa fa-check"></i><b>6.12.1</b> Your turn</a></li>
<li class="chapter" data-level="6.12.2" data-path="dplyr.html"><a href="dplyr.html#your-turn-8"><i class="fa fa-check"></i><b>6.12.2</b> Your turn</a></li>
</ul></li>
<li class="chapter" data-level="6.13" data-path="dplyr.html"><a href="dplyr.html#all-together-now"><i class="fa fa-check"></i><b>6.13</b> All together now</a><ul>
<li class="chapter" data-level="6.13.1" data-path="dplyr.html"><a href="dplyr.html#compare-to-base-r"><i class="fa fa-check"></i><b>6.13.1</b> Compare to base R</a></li>
<li class="chapter" data-level="6.13.2" data-path="dplyr.html"><a href="dplyr.html#your-turn-9"><i class="fa fa-check"></i><b>6.13.2</b> Your Turn</a></li>
</ul></li>
<li class="chapter" data-level="6.14" data-path="dplyr.html"><a href="dplyr.html#joining-datasets"><i class="fa fa-check"></i><b>6.14</b> Joining datasets</a></li>
<li class="chapter" data-level="6.15" data-path="dplyr.html"><a href="dplyr.html#key-points"><i class="fa fa-check"></i><b>6.15</b> Key Points</a></li>
<li class="chapter" data-level="6.16" data-path="dplyr.html"><a href="dplyr.html#troubleshooting."><i class="fa fa-check"></i><b>6.16</b> Troubleshooting.</a><ul>
<li class="chapter" data-level="6.16.1" data-path="dplyr.html"><a href="dplyr.html#error-unexpected-special-in"><i class="fa fa-check"></i><b>6.16.1</b> Error: unexpected SPECIAL in &quot; %&gt;%&quot;</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="tidyr.html"><a href="tidyr.html"><i class="fa fa-check"></i><b>7</b> Data Wrangling: <code>tidyr</code></a><ul>
<li class="chapter" data-level="7.1" data-path="tidyr.html"><a href="tidyr.html#objectives-resources-2"><i class="fa fa-check"></i><b>7.1</b> Objectives &amp; Resources</a><ul>
<li class="chapter" data-level="7.1.1" data-path="tidyr.html"><a href="tidyr.html#objectives-4"><i class="fa fa-check"></i><b>7.1.1</b> Objectives</a></li>
<li class="chapter" data-level="7.1.2" data-path="tidyr.html"><a href="tidyr.html#resources-3"><i class="fa fa-check"></i><b>7.1.2</b> Resources</a></li>
<li class="chapter" data-level="7.1.3" data-path="tidyr.html"><a href="tidyr.html#data-and-packages-2"><i class="fa fa-check"></i><b>7.1.3</b> Data and packages</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="tidyr.html"><a href="tidyr.html#tidyr-basics"><i class="fa fa-check"></i><b>7.2</b> <code>tidyr</code> basics</a></li>
<li class="chapter" data-level="7.3" data-path="tidyr.html"><a href="tidyr.html#explore-gapminder-dataset."><i class="fa fa-check"></i><b>7.3</b> Explore gapminder dataset.</a><ul>
<li class="chapter" data-level="7.3.1" data-path="tidyr.html"><a href="tidyr.html#setup-1"><i class="fa fa-check"></i><b>7.3.1</b> Setup</a></li>
<li class="chapter" data-level="7.3.2" data-path="tidyr.html"><a href="tidyr.html#load-tidyverse-which-has-tidyr-inside"><i class="fa fa-check"></i><b>7.3.2</b> load <code>tidyverse</code> (which has <code>tidyr</code> inside)</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="tidyr.html"><a href="tidyr.html#gather-data-from-wide-to-long-format"><i class="fa fa-check"></i><b>7.4</b> <code>gather()</code> data from wide to long format</a></li>
<li class="chapter" data-level="7.5" data-path="tidyr.html"><a href="tidyr.html#plot-long-format-data"><i class="fa fa-check"></i><b>7.5</b> Plot long format data</a></li>
<li class="chapter" data-level="7.6" data-path="tidyr.html"><a href="tidyr.html#spread"><i class="fa fa-check"></i><b>7.6</b> <code>spread()</code></a><ul>
<li class="chapter" data-level="7.6.1" data-path="tidyr.html"><a href="tidyr.html#answer-no-peeking-1"><i class="fa fa-check"></i><b>7.6.1</b> Answer (no peeking)</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="tidyr.html"><a href="tidyr.html#clean-up-and-save-your-.rmd"><i class="fa fa-check"></i><b>7.7</b> clean up and save your .Rmd</a><ul>
<li class="chapter" data-level="7.7.1" data-path="tidyr.html"><a href="tidyr.html#complete"><i class="fa fa-check"></i><b>7.7.1</b> <code>complete()</code></a></li>
</ul></li>
<li class="chapter" data-level="7.8" data-path="tidyr.html"><a href="tidyr.html#other-links"><i class="fa fa-check"></i><b>7.8</b> Other links</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="programming.html"><a href="programming.html"><i class="fa fa-check"></i><b>8</b> Programming in R</a><ul>
<li class="chapter" data-level="8.1" data-path="programming.html"><a href="programming.html#objectives-resources-3"><i class="fa fa-check"></i><b>8.1</b> Objectives &amp; Resources</a><ul>
<li class="chapter" data-level="8.1.1" data-path="programming.html"><a href="programming.html#objectives-5"><i class="fa fa-check"></i><b>8.1.1</b> Objectives</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="programming.html"><a href="programming.html#analysis-plan"><i class="fa fa-check"></i><b>8.2</b> Analysis plan</a></li>
<li class="chapter" data-level="8.3" data-path="programming.html"><a href="programming.html#create-an-r-script"><i class="fa fa-check"></i><b>8.3</b> Create an R script</a></li>
<li class="chapter" data-level="8.4" data-path="programming.html"><a href="programming.html#automation-with-for-loops"><i class="fa fa-check"></i><b>8.4</b> Automation with for loops</a><ul>
<li class="chapter" data-level="8.4.1" data-path="programming.html"><a href="programming.html#thinking-ahead-cleaning-up-our-code"><i class="fa fa-check"></i><b>8.4.1</b> Thinking ahead: cleaning up our code</a></li>
<li class="chapter" data-level="8.4.2" data-path="programming.html"><a href="programming.html#for-loop-basic-structure"><i class="fa fa-check"></i><b>8.4.2</b> For loop basic structure</a></li>
<li class="chapter" data-level="8.4.3" data-path="programming.html"><a href="programming.html#executable-for-loop"><i class="fa fa-check"></i><b>8.4.3</b> Executable for loop!</a></li>
<li class="chapter" data-level="8.4.4" data-path="programming.html"><a href="programming.html#clean-up-our-repo"><i class="fa fa-check"></i><b>8.4.4</b> Clean up our repo</a></li>
<li class="chapter" data-level="8.4.5" data-path="programming.html"><a href="programming.html#your-turn-10"><i class="fa fa-check"></i><b>8.4.5</b> Your turn</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="programming.html"><a href="programming.html#conditional-statements-with-if-and-else"><i class="fa fa-check"></i><b>8.5</b> Conditional statements with <code>if</code> and <code>else</code></a><ul>
<li class="chapter" data-level="8.5.1" data-path="programming.html"><a href="programming.html#if-statement-basic-structure"><i class="fa fa-check"></i><b>8.5.1</b> if statement basic structure</a></li>
<li class="chapter" data-level="8.5.2" data-path="programming.html"><a href="programming.html#executable-if-statement"><i class="fa fa-check"></i><b>8.5.2</b> Executable if statement</a></li>
<li class="chapter" data-level="8.5.3" data-path="programming.html"><a href="programming.html#executable-ifelse-statement"><i class="fa fa-check"></i><b>8.5.3</b> Executable if/else statement</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="programming.html"><a href="programming.html#more-r"><i class="fa fa-check"></i><b>8.6</b> More R!</a><ul>
<li class="chapter" data-level="8.6.1" data-path="programming.html"><a href="programming.html#importing-and-installing"><i class="fa fa-check"></i><b>8.6.1</b> Importing and Installing</a></li>
<li class="chapter" data-level="8.6.2" data-path="programming.html"><a href="programming.html#organization-and-workflows"><i class="fa fa-check"></i><b>8.6.2</b> Organization and workflows</a></li>
<li class="chapter" data-level="8.6.3" data-path="programming.html"><a href="programming.html#getting-help"><i class="fa fa-check"></i><b>8.6.3</b> Getting help</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="programming.html"><a href="programming.html#ideas-for-extended-analysis-2"><i class="fa fa-check"></i><b>8.7</b> Ideas for Extended Analysis 2</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="collaborating.html"><a href="collaborating.html"><i class="fa fa-check"></i><b>9</b> Collaborating with GitHub</a><ul>
<li class="chapter" data-level="9.1" data-path="collaborating.html"><a href="collaborating.html#objectives-resources-4"><i class="fa fa-check"></i><b>9.1</b> Objectives &amp; Resources</a><ul>
<li class="chapter" data-level="9.1.1" data-path="collaborating.html"><a href="collaborating.html#objectives-6"><i class="fa fa-check"></i><b>9.1.1</b> Objectives</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="collaborating.html"><a href="collaborating.html#create-repo-partner-1"><i class="fa fa-check"></i><b>9.2</b> Create repo (Partner 1)</a></li>
<li class="chapter" data-level="9.3" data-path="collaborating.html"><a href="collaborating.html#create-a-gh-pages-branch-partner-1"><i class="fa fa-check"></i><b>9.3</b> Create a gh-pages branch (Partner 1)</a></li>
<li class="chapter" data-level="9.4" data-path="collaborating.html"><a href="collaborating.html#give-your-collaborator-administration-privileges-partner-1-and-2"><i class="fa fa-check"></i><b>9.4</b> Give your collaborator administration privileges (Partner 1 and 2)</a></li>
<li class="chapter" data-level="9.5" data-path="collaborating.html"><a href="collaborating.html#clone-to-a-new-rproject-partner-1"><i class="fa fa-check"></i><b>9.5</b> Clone to a new Rproject (Partner 1)</a></li>
<li class="chapter" data-level="9.6" data-path="collaborating.html"><a href="collaborating.html#clone-to-a-new-rproject-partner-2"><i class="fa fa-check"></i><b>9.6</b> Clone to a new Rproject (Partner 2)</a></li>
<li class="chapter" data-level="9.7" data-path="collaborating.html"><a href="collaborating.html#edit-a-file-and-sync-partner-2"><i class="fa fa-check"></i><b>9.7</b> Edit a file and sync (Partner 2)</a></li>
<li class="chapter" data-level="9.8" data-path="collaborating.html"><a href="collaborating.html#state-of-the-repository"><i class="fa fa-check"></i><b>9.8</b> State of the Repository</a></li>
<li class="chapter" data-level="9.9" data-path="collaborating.html"><a href="collaborating.html#merge-conflicts"><i class="fa fa-check"></i><b>9.9</b> Merge conflicts</a><ul>
<li class="chapter" data-level="9.9.1" data-path="collaborating.html"><a href="collaborating.html#your-turn-11"><i class="fa fa-check"></i><b>9.9.1</b> Your turn</a></li>
</ul></li>
<li class="chapter" data-level="9.10" data-path="collaborating.html"><a href="collaborating.html#how-do-you-avoid-merge-conflicts"><i class="fa fa-check"></i><b>9.10</b> How do you avoid merge conflicts?</a></li>
<li class="chapter" data-level="9.11" data-path="collaborating.html"><a href="collaborating.html#create-your-collaborative-website"><i class="fa fa-check"></i><b>9.11</b> Create your collaborative website</a></li>
<li class="chapter" data-level="9.12" data-path="collaborating.html"><a href="collaborating.html#your-turn-12"><i class="fa fa-check"></i><b>9.12</b> Your turn</a></li>
<li class="chapter" data-level="9.13" data-path="collaborating.html"><a href="collaborating.html#explore-on-github.com"><i class="fa fa-check"></i><b>9.13</b> Explore on GitHub.com</a><ul>
<li class="chapter" data-level="9.13.1" data-path="collaborating.html"><a href="collaborating.html#commit-history"><i class="fa fa-check"></i><b>9.13.1</b> Commit History</a></li>
<li class="chapter" data-level="9.13.2" data-path="collaborating.html"><a href="collaborating.html#blame"><i class="fa fa-check"></i><b>9.13.2</b> Blame</a></li>
<li class="chapter" data-level="9.13.3" data-path="collaborating.html"><a href="collaborating.html#issues"><i class="fa fa-check"></i><b>9.13.3</b> Issues</a></li>
</ul></li>
<li class="chapter" data-level="9.14" data-path="collaborating.html"><a href="collaborating.html#nyc-flights-exploration"><i class="fa fa-check"></i><b>9.14</b> NYC flights exploration</a><ul>
<li class="chapter" data-level="9.14.1" data-path="collaborating.html"><a href="collaborating.html#logical-operators"><i class="fa fa-check"></i><b>9.14.1</b> Logical operators</a></li>
</ul></li>
<li class="chapter" data-level="9.15" data-path="collaborating.html"><a href="collaborating.html#your-turn-13"><i class="fa fa-check"></i><b>9.15</b> Your turn</a><ul>
<li class="chapter" data-level="9.15.1" data-path="collaborating.html"><a href="collaborating.html#use-logicals"><i class="fa fa-check"></i><b>9.15.1</b> Use logicals</a></li>
<li class="chapter" data-level="9.15.2" data-path="collaborating.html"><a href="collaborating.html#missing-values"><i class="fa fa-check"></i><b>9.15.2</b> Missing values</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="champion.html"><a href="champion.html"><i class="fa fa-check"></i><b>10</b> Be a champion for open science</a><ul>
<li class="chapter" data-level="10.1" data-path="champion.html"><a href="champion.html#objectives-and-resources"><i class="fa fa-check"></i><b>10.1</b> Objectives and Resources</a></li>
<li class="chapter" data-level="10.2" data-path="champion.html"><a href="champion.html#three-messages"><i class="fa fa-check"></i><b>10.2</b> Three messages</a></li>
<li class="chapter" data-level="10.3" data-path="champion.html"><a href="champion.html#build-community"><i class="fa fa-check"></i><b>10.3</b> Build community</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to Open Data Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="ggplot2" class="section level1">
<h1><span class="header-section-number">Chapter 5</span> Visualizing: <code>ggplot2</code></h1>
<div id="why-ggplot2" class="section level2">
<h2><span class="header-section-number">5.1</span> Why ggplot2?</h2>
<p>This tutorial focuses exclusively on data visualization using ggplot2 because this package:</p>
<ul>
<li>provides a coherent language for visualizing data (vs. the original ‘plot’ function, which developed in an ad-hoc way)</li>
<li>makes many tasks easier, such as: visualizing a third (z) variable; saving figures; automating plotting and formatting tasks</li>
<li>creates beautiful figures and is flexible</li>
</ul>
<p>You should really use ggplot2 for nearly all data visualization!</p>
</div>
<div id="additional-resources-for-data-visualization-in-r" class="section level2">
<h2><span class="header-section-number">5.2</span> Additional resources for data visualization in R</h2>
<p>The goal of this tutorial is to introduce you to the basics of ggplot2. I focus only on the features I use most often. We will barely scratch the surface of ggplot2’s functionality. But there are many resources that will help you learn more. Here are some of the ones I use:</p>
<ul>
<li>The official ggplot2 <a href="https://www.rstudio.com/wp-content/uploads/2015/03/ggplot2-cheatsheet.pdf">cheatsheet</a> is amazing!</li>
<li>Winston Chang’s book converted me from someone who was slightly confused by ggplot2 to a superuser….so I can’t recommend it enough! And, the <a href="http://www.cookbook-r.com/Graphs/#graphs-with-ggplot2">associated website</a> is great too.</li>
</ul>
<p><br></p>
<div class="figure">
<img src="img/ChangBook.png" />

</div>
<p><br></p>
<ul>
<li>Hadley Wickham’s <a href="http://r4ds.had.co.nz/data-visualisation.html">R for Data Science book</a>, which is inspiration for much of this tutorial.</li>
</ul>
</div>
<div id="objectives-2" class="section level2">
<h2><span class="header-section-number">5.3</span> Objectives</h2>
<ul>
<li>install the <code>ggplot2</code> package by installing <code>tidyverse</code></li>
<li>learn basics of ggplot2 with a dataset describing global ocean health</li>
<li>practice writing a script in RMarkdown</li>
<li>practice the rstudio-github workflow</li>
</ul>
</div>
<div id="install-tidyverse-tidyverse" class="section level2">
<h2><span class="header-section-number">5.4</span> Install tidyverse: <code>tidyverse</code></h2>
<p>We will use the <code>ggplot2</code> package, which is bundled with a composite-package called <code>tidyverse</code>. Check out <a href="https://www.tidyverse.org">tidyverse.org/</a> for more information.</p>
<p>We will download and install <code>tidyverse</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## from CRAN:
<span class="kw">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>) ## do this once only to install the package on your computer.</code></pre></div>
<p>You will see some messages describing which packages were installed with <code>tidyverse</code>. Messages about name conflicts are also returned. This is not a problem its just an alert that two functions from dplyr will replace functions in the built-in stats package with the same name.</p>
</div>
<div id="create-an-rmarkdown-file-to-work-from" class="section level2">
<h2><span class="header-section-number">5.5</span> Create an RMarkdown file to work from</h2>
<hr />
<p><strong>To do:</strong> <strong>Create a new R Markdown file</strong></p>
<p>We will create the RMarkdown file you will be working from. You can write notes to yourself in Markdown and have a record of all your R code.</p>
<p>Go to File &gt; New File &gt; R Markdown … (or click the green plus in the top left corner).</p>
<p>Next, replace all the automatic text with the following:</p>
<pre><code>---
title: &quot;Graphics with ggplot2&quot;
author: &quot;Julie&quot;
date: &quot;11/21/2017&quot;
output: html_document
---

# Learning ggplot2

We&#39;re learning ggplot2 It&#39;s going to be amazing. 
</code></pre>
<p>Now, let’s save the file. I’m going to call my file <code>ggplot2.Rmd</code>. Do a <em>pull</em>…then <em>stage/commit</em> (to save to git history)…then <em>push</em> to sync with GitHub.com.</p>
<hr />
</div>
<div id="load-the-tidverse" class="section level2">
<h2><span class="header-section-number">5.6</span> Load the tidverse</h2>
<p>We have downloaded the tidyverse package but it is not yet loaded in the R workspace. We will use the <code>library()</code> function to load tidyverse. This will be the first code chunk in your RMarkdown:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse) ## do this every time you restart R and need it </code></pre></div>
</div>
<div id="load-and-explore-data" class="section level2">
<h2><span class="header-section-number">5.7</span> Load and explore data</h2>
<p>We will load the dataset we will be using for this tutorial into our workspace directly from GitHub.com (I always find this GitHub functionality so cool!).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ohi_data &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/OHI-Science/data-science-training/master/data/OHI_global_data.csv&quot;</span>)</code></pre></div>
<p>These data are from the global <a href="http://ohi-science.org/ohi-global/">Ocean Health Index</a> which assesses the condition of marine resources for 220 countries or territories.</p>
<p>The dataset includes:</p>
<table style="width:85%;">
<colgroup>
<col width="4%" />
<col width="36%" />
<col width="4%" />
<col width="40%" />
</colgroup>
<thead>
<tr class="header">
<th>variable</th>
<th>description</th>
<th>data type</th>
<th>examples</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>country</td>
<td>OHI region name for country or territorial regions with marine coastline</td>
<td>character</td>
<td>Jarvis Island, Italy</td>
</tr>
<tr class="even">
<td>OHI_score</td>
<td>Ocean Health Index scores describing condition of marine resources based on the 2017 global assessment</td>
<td>numeric</td>
<td>values can range from 0-100, with 100 being the best possible score</td>
</tr>
<tr class="odd">
<td>OHI_trend</td>
<td>average annual change in OHI scores from 2012 to 2017</td>
<td>numeric</td>
<td>values range from -3.9 to 1.86, with positive values indicating improving scores</td>
</tr>
<tr class="even">
<td>coastal_pop</td>
<td>human population within 25 miles of coast</td>
<td>numeric</td>
<td>values range from 0 to &gt;317 million</td>
</tr>
<tr class="odd">
<td>log_coastal_pop</td>
<td>log(coastal_pop + 1)</td>
<td>numeric</td>
<td>values range from 0 to ~20</td>
</tr>
<tr class="even">
<td>cumulative_human_impact</td>
<td>average cumulative impact of human stressors (e.g., SST, shipping, pollution) on marine ecosystems within the country’s marine boundaries</td>
<td>numeric</td>
<td>values range from 1.419 to 6.762, with larger values indicating higher impact</td>
</tr>
<tr class="odd">
<td>HDI</td>
<td><a href="http://hdr.undp.org/en/content/human-development-index-hdi">Human Development Index</a> scores, which measure average achievement in key dimensions of human development: a long and healthy life, being knowledgeable and have a decent standard of living.</td>
<td>numeric</td>
<td>values are rescaled to be between 0 to 1, with higher scores indicating better human development</td>
</tr>
<tr class="even">
<td>georegion_one</td>
<td>lower resolution UN georegion designations based on georegional and social similarities</td>
<td>character</td>
<td>Africa, Americas, Asia</td>
</tr>
<tr class="odd">
<td>georegion_two</td>
<td>higher resolution UN georegion designations based on georegional and social similarities</td>
<td>character</td>
<td>Australia and New Zealand, Eastern Asia, Caribbean</td>
</tr>
</tbody>
</table>
<p><br></p>
<p>Let’s explore these data, shall we:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(ohi_data)</code></pre></div>
<pre><code>## # A tibble: 6 x 9
##   country OHI_score OHI_trend coastal_pop log_coastal_pop cumulative_huma…
##   &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;           &lt;dbl&gt;            &lt;dbl&gt;
## 1 South …      92.0      1.67           0               0             2.82
## 2 Crozet…      88.1      0.81           0               0             1.92
## 3 Howlan…      87.7      0.08           0               0             2.97
## 4 Heard …      87.4      0.46           0               0             2.78
## 5 Kergue…      87.3      0.72           0               0             2.02
## 6 Jarvis…      83.9     -0.25           0               0             1.85
## # … with 3 more variables: HDI &lt;dbl&gt;, georegion_one &lt;chr&gt;,
## #   georegion_two &lt;chr&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(ohi_data)</code></pre></div>
<pre><code>##    country            OHI_score       OHI_trend        coastal_pop       
##  Length:221         Min.   :41.83   Min.   :-3.9900   Min.   :        0  
##  Class :character   1st Qu.:61.62   1st Qu.:-0.5600   1st Qu.:   106224  
##  Mode  :character   Median :67.82   Median :-0.1800   Median :  1066507  
##                     Mean   :66.87   Mean   :-0.2261   Mean   : 11471246  
##                     3rd Qu.:72.21   3rd Qu.: 0.1900   3rd Qu.:  7081969  
##                     Max.   :91.98   Max.   : 1.8600   Max.   :317149893  
##                                                                          
##  log_coastal_pop cumulative_human_impact      HDI        
##  Min.   : 0.00   Min.   :1.419           Min.   :0.4140  
##  1st Qu.:11.57   1st Qu.:3.553           1st Qu.:0.5970  
##  Median :13.88   Median :3.896           Median :0.7400  
##  Mean   :12.64   Mean   :3.861           Mean   :0.7159  
##  3rd Qu.:15.77   3rd Qu.:4.351           3rd Qu.:0.8270  
##  Max.   :19.57   Max.   :6.762           Max.   :0.9490  
##                                          NA&#39;s   :76      
##  georegion_one      georegion_two     
##  Length:221         Length:221        
##  Class :character   Class :character  
##  Mode  :character   Mode  :character  
##                                       
##                                       
##                                       
## </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(ohi_data<span class="op">$</span>georegion_one)</code></pre></div>
<pre><code>## 
##                          Africa                        Americas 
##                              46                               3 
##                            Asia                          Europe 
##                              40                              43 
## Latin America and the Caribbean                         Oceania 
##                              48                              34 
##                Southern Islands 
##                               7</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(ohi_data<span class="op">$</span>georegion_two)</code></pre></div>
<pre><code>## 
## Australia and New Zealand                 Caribbean 
##                         6                        28 
##           Central America            Eastern Africa 
##                         9                        17 
##              Eastern Asia            Eastern Europe 
##                         6                         5 
##                 Melanesia                Micronesia 
##                         5                        13 
##             Middle Africa           Northern Africa 
##                         7                         7 
##          Northern America           Northern Europe 
##                         3                        19 
##                 Polynesia             South America 
##                        10                        11 
##        South-Eastern Asia           Southern Africa 
##                        12                         2 
##             Southern Asia           Southern Europe 
##                         7                        14 
##          Southern Islands            Western Africa 
##                         7                        13 
##              Western Asia            Western Europe 
##                        15                         5</code></pre>
</div>
<div id="plotting-with-ggplot2" class="section level2">
<h2><span class="header-section-number">5.8</span> Plotting with <strong><code>ggplot2</code></strong></h2>
<p>Plots are created using a step-wise approach that is flexible and easily customized. We will walk through the steps needed to build a plot in ggplot2.</p>
<p><em>HINT: Start with the simplest version of your plot and build onto it.</em></p>
<div id="step-1-identify-the-dataframe" class="section level3">
<h3><span class="header-section-number">5.8.1</span> Step 1: Identify the dataframe</h3>
<p>ggplot2 requires the data to be in a dataframe format. The first step is to use the <code>ggplot()</code> function to identify the dataframe with the data you want to plot.</p>
<p>At this point, we will also assign the x and y axis variables within the aes function (this stands for aesthetics, and we will discuss this concept after we have a plot to work with).</p>
<p>[NOTE: This step was confusing for me for a long time because it doesn’t actually make the plot!]</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> ohi_data, <span class="kw">aes</span>(<span class="dt">x =</span> OHI_score, <span class="dt">y =</span> HDI))</code></pre></div>
</div>
<div id="step-2-identify-the-style-of-plot-you-want-to-create-i.e.-the-geom" class="section level3">
<h3><span class="header-section-number">5.8.2</span> Step 2: Identify the style of plot you want to create (i.e., the geom)</h3>
<p>Next, we will actually create the plot by adding a geom function using the <code>+</code> operator. A <strong>geom</strong> is the geometrical object that a plot uses to represent data. For example, bar charts use bar geoms, line charts use line geoms, boxplots use boxplot geoms, and so on.</p>
<p>You can use different geoms to plot the same data. To change the type of plot, change the geom function that you add to <code>ggplot()</code>.</p>
<p><code>ggplot2</code> provides over 30 geoms, which are described in the official ggplot2 <a href="https://www.rstudio.com/wp-content/uploads/2015/03/ggplot2-cheatsheet.pdf">cheatsheet</a>. To learn more about any single geom, use help: <code>?geom_smooth</code>. Extension packages provide even more geoms (see <a href="https://www.ggplot2-exts.org" class="uri">https://www.ggplot2-exts.org</a> for a sampling).</p>
<p>We will start by creating a scatterplot of ohi scores within UN georegions by adding the <code>geom_point</code> function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> ohi_data, <span class="kw">aes</span>(<span class="dt">x =</span> georegion_one, <span class="dt">y =</span>OHI_score)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>()</code></pre></div>
<p><img src="data-science-training_files/figure-html/first-ggplot-1.png" width="672" /></p>
<p>Yay! A plot!</p>
<p>Next we will replace geom_point() with geom_jitter() to create a style of plot with the same data. geom_jitter is similar to geom_point, but it adds random variation to values along the x-axis to separate points:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> ohi_data, <span class="kw">aes</span>(<span class="dt">x =</span> georegion_one, <span class="dt">y =</span>OHI_score)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_jitter</span>(<span class="dt">width=</span><span class="fl">0.2</span>) <span class="co"># the width argument describes how much scatter to add</span></code></pre></div>
<p><img src="data-science-training_files/figure-html/second-ggplot-1.png" width="672" /> <br></p>
<p>Now we will explore other geoms.</p>
<p>The following bar plot uses geom_bar to describe the number of countries in each UN category:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> ohi_data, <span class="kw">aes</span>(<span class="dt">x =</span> georegion_one)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_bar</span>() </code></pre></div>
<p><img src="data-science-training_files/figure-html/barplot2-1.png" width="672" /> <br></p>
<p>A histogram using geom_histogram:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> ohi_data, <span class="kw">aes</span>(<span class="dt">x =</span> HDI)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_histogram</span>() </code></pre></div>
<p><img src="data-science-training_files/figure-html/histogram-1.png" width="672" /> <br></p>
<p>Multiple geoms can be layered on the same plot. Geom layers can be added using either the same or different dataframes. To demonstrate this we will use a secondary dataset with the mean OHI score for each UN georegion. We will create a bar plot of the means for each region and then overlay the point data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ohi_summary &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/OHI-Science/data-science-training/master/data/OHI_scores_georegion_summary.csv&quot;</span>)

ohi_summary</code></pre></div>
<pre><code>## # A tibble: 7 x 2
##   georegions                      OHI_score_average
##   &lt;chr&gt;                                       &lt;dbl&gt;
## 1 Africa                                       59.7
## 2 Americas                                     68.3
## 3 Asia                                         63.9
## 4 Europe                                       68.5
## 5 Latin America and the Caribbean              67.0
## 6 Oceania                                      75.0
## 7 Southern Islands                             80.1</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> ohi_summary, <span class="kw">aes</span>(<span class="dt">x =</span> georegions, <span class="dt">y =</span> OHI_score_average)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat=</span><span class="st">&quot;identity&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_jitter</span>(<span class="dt">data=</span>ohi_data, <span class="kw">aes</span>(<span class="dt">x=</span>georegion_one, <span class="dt">y=</span>OHI_score))</code></pre></div>
<p><img src="data-science-training_files/figure-html/third-ggplot-1.png" width="672" /> <br></p>
<p>In the above example, the global mappings are designated by: <code>ggplot(data = ohi_summary, aes(x = georegions, y = OHI_score_average))</code>. These are then overwritten by the local mappings designated in the geom_jitter layer. The global designations will apply to subsequent layers, unless otherwise changed. This makes it possible to display different aesthetics and data in different layers.</p>
<p><br> <br></p>
<hr />
<blockquote>
<p><strong>STOP: let’s Commit, Pull and Push to GitHub</strong> <strong>And discuss the following</strong></p>
</blockquote>
<ol style="list-style-type: decimal">
<li>In the code below, why isn’t the data showing up?</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> ohi_data, <span class="kw">aes</span>(<span class="dt">y =</span> OHI_score, <span class="dt">x =</span> HDI, <span class="dt">color=</span>georegion_one))</code></pre></div>
<p><br></p>
<ol start="2" style="list-style-type: decimal">
<li>Are these two approaches the same?</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> ohi_data, <span class="kw">aes</span>(<span class="dt">y=</span>OHI_score, <span class="dt">x =</span> HDI, <span class="dt">color=</span>georegion_one)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>()
  
<span class="kw">ggplot</span>(<span class="dt">data =</span> ohi_data) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">y =</span> OHI_score, <span class="dt">x =</span> HDI, <span class="dt">color=</span>georegion_one))  </code></pre></div>
<p><br></p>
<p><strong>Answers</strong></p>
<ol style="list-style-type: decimal">
<li>The code is missing a geom to describe how the data should be plotted.</li>
<li>These two approaches result in the same plot here, but there could be downstream effects as more layers are added.</li>
</ol>
<hr />
<p><br> <br></p>
<p><strong>More about the aes function</strong></p>
<p>The arguments within <code>aes()</code> link variables in the dataframe to some aspect of plot appearance. As we have discussed, x and y describe the axes, but other arguments can be added to describe a z variable (e.g. size or color or shape of points). Here are some examples of aes arguments:</p>
<ul>
<li><em>color</em> color of lines/points</li>
<li><em>fill</em> color within polygons</li>
<li><em>label</em> name</li>
<li><em>linetype</em> type of line</li>
<li><em>shape</em> style of point</li>
<li><em>alpha</em> transparency (0-1)</li>
<li><em>size</em> size of shape</li>
</ul>
<p>This is very powerful! Let’s explore.</p>
<p>Changing the point size:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> ohi_data, <span class="kw">aes</span>(<span class="dt">x =</span> OHI_score, <span class="dt">y =</span> HDI, <span class="dt">size =</span> coastal_pop)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>()</code></pre></div>
<p><img src="data-science-training_files/figure-html/aes-size-1.png" width="672" /></p>
<p><br></p>
<p>Changing the color: continuous variable</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> ohi_data, <span class="kw">aes</span>(<span class="dt">x =</span> OHI_score, <span class="dt">y =</span> HDI, <span class="dt">color =</span> coastal_pop)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>()</code></pre></div>
<p><img src="data-science-training_files/figure-html/aes-color-1.png" width="672" /></p>
<p><br></p>
<p>Changing the color: discrete variable</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> ohi_data, <span class="kw">aes</span>(<span class="dt">x =</span> OHI_score, <span class="dt">y =</span> HDI, <span class="dt">color =</span> georegion_one)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>()</code></pre></div>
<p><img src="data-science-training_files/figure-html/aes-color_discrete-1.png" width="672" /> <br></p>
<p>Changing shape of points</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> ohi_data, <span class="kw">aes</span>(<span class="dt">x =</span> OHI_score, <span class="dt">y =</span> HDI, <span class="dt">shape =</span> georegion_one)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>()</code></pre></div>
<p><img src="data-science-training_files/figure-html/aes_shape-1.png" width="672" /> <br></p>
<p>Adding labels</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#This doesn&#39;t add the labels like it seems like it should:</span>
<span class="kw">ggplot</span>(<span class="dt">data =</span> ohi_data, <span class="kw">aes</span>(<span class="dt">x =</span> OHI_score, <span class="dt">y =</span> HDI, <span class="dt">label=</span>country)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">x =</span> OHI_score, <span class="dt">y =</span> HDI)) </code></pre></div>
<p><img src="data-science-training_files/figure-html/unnamed-chunk-32-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># To do this we have to add a geom_text function</span>
<span class="kw">ggplot</span>(<span class="dt">data =</span> ohi_data, <span class="kw">aes</span>(<span class="dt">x =</span> OHI_score, <span class="dt">y =</span> HDI, <span class="dt">label=</span>country)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">x =</span> OHI_score, <span class="dt">y =</span> HDI)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_text</span>()</code></pre></div>
<p><img src="data-science-training_files/figure-html/unnamed-chunk-32-2.png" width="672" /></p>
</div>
<div id="step-3-customize-your-plot" class="section level3">
<h3><span class="header-section-number">5.8.3</span> Step 3: Customize your plot</h3>
<p>So far, the plots we have created are fairly ugly and hard to read. We will now improve these basic plots using a stepwise approach.</p>
<div id="themes" class="section level4">
<h4><span class="header-section-number">5.8.3.1</span> Themes</h4>
<p>I do not like the default ggplot2 figures because I find them too busy. A quick way to improve plot appearance is to use themes. Many themes are built into the <code>ggplot2</code> package. For example, <code>theme_bw()</code> removes the gray background. Once you start typing <code>theme_</code> a list of options will pop up.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> ohi_data, <span class="kw">aes</span>(<span class="dt">x =</span> OHI_score, <span class="dt">y =</span> HDI)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">theme_bw</span>()</code></pre></div>
<p><img src="data-science-training_files/figure-html/themes-1.png" width="672" /></p>
<p><br></p>
<p>The <a href="https://yutannihilation.github.io/allYourFigureAreBelongToUs/ggthemes/">ggthemes</a> package provides many additional themes (including a Tufte theme..which is very clean and data oriented). The <a href="https://www.ggplot2-exts.org"><strong><code>ggplot2</code></strong> extensions website</a> provides a list of packages that extend the capabilities of <strong><code>ggplot2</code></strong>, including additional themes.</p>
<p>I often create my own themes to make figures that work well in publications or presentations. This also gives my figures a consistent look (without having to remember from figure to figure the size of labels, etc.). I have found that storing my themes on Github works well. Here is an example of a theme I created named “scatterTheme”:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">source</span>(<span class="st">&#39;https://raw.githubusercontent.com/OHI-Science/ohiprep/master/src/R/scatterTheme.txt&#39;</span>)       

<span class="kw">ggplot</span>(<span class="dt">data =</span> ohi_data, <span class="kw">aes</span>(<span class="dt">x =</span> OHI_score, <span class="dt">y =</span> HDI)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span>
<span class="st">  </span>scatterTheme</code></pre></div>
<p><img src="data-science-training_files/figure-html/my%20theme-1.png" width="672" /></p>
</div>
<div id="labels-axis-plot-legend" class="section level4">
<h4><span class="header-section-number">5.8.3.2</span> Labels: axis, plot, legend</h4>
<p>One of the first things you will often want to do is alter labels for: titles, axes, figure legends, etc. These modifications involve manipulating the theme function and can quickly get complicated, and I typically have to Google the specifics or refer to a <a href="https://www.rstudio.com/wp-content/uploads/2016/11/ggplot2-cheatsheet-2.1.pdf">cheatsheet</a>, despite using ggplot2 for years and years and years.</p>
<p>But, some key changes are easy to make using the labs function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> ohi_data, <span class="kw">aes</span>(<span class="dt">y =</span> OHI_score, <span class="dt">x =</span> HDI, <span class="dt">color=</span>georegion_one)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span>
<span class="st">    </span><span class="kw">labs</span>(<span class="dt">y =</span> <span class="st">&quot;OHI score, 2017&quot;</span>,
       <span class="dt">x =</span> <span class="st">&quot;Human Development Index&quot;</span>,
       <span class="dt">title =</span> <span class="st">&quot;Countries with high human development have more sustainable oceans&quot;</span>,
      <span class="dt">color =</span> <span class="st">&quot;Georegion&quot;</span>) <span class="op">+</span><span class="st">  </span><span class="co"># if color doesn&#39;t work, use &quot;fill&quot;</span>
<span class="st">     </span><span class="kw">theme_bw</span>()</code></pre></div>
<p><img src="data-science-training_files/figure-html/labels-1.png" width="672" /></p>
<p><br> <br></p>
<hr />
<blockquote>
<p><strong>We interrupt this section on customizing your plot for an exercise (5 min)</strong></p>
</blockquote>
<ol style="list-style-type: decimal">
<li>Make a histogram of the OHI_score variable and color by the georegion_one variable.</li>
<li>How would you make all the bars on your histogram light gray? Hint: use argument <code>fill = &quot;lightgray&quot;</code>. Where is the best place to add this in your code to get this to work?</li>
<li>Play with some themes and customizing title and axes labels. Try changing the text sizes and angles (refer to the <a href="https://www.rstudio.com/wp-content/uploads/2016/11/ggplot2-cheatsheet-2.1.pdf">cheatsheet</a>).</li>
</ol>
<p><br></p>
<p><strong>Answers (no peeking)</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># 1. This one is tricky because the color aesthetic only does the outline of the bars.</span>
<span class="co"># If you got that far, you were halfway there.  </span>
<span class="co"># You will need to use the fill argument to color shapes </span>

my_plot &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> ohi_data, <span class="kw">aes</span>(<span class="dt">x=</span>OHI_score, <span class="dt">fill=</span>georegion_one)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_histogram</span>()  
my_plot


<span class="co"># 2. This was something that confused me for a while.  My instinct was to add it to the aes function....BUT NO!!!</span>
<span class="co"># The arguments in aes should correspond to a column in the dataframe.  The best place for this argument is in </span>
<span class="co"># the geom function (and not in an aes function)</span>
<span class="kw">ggplot</span>(<span class="dt">data =</span> ohi_data, <span class="kw">aes</span>(<span class="dt">x=</span>OHI_score)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">fill=</span><span class="st">&quot;lightgray&quot;</span>)  


<span class="co"># 3.</span>
my_plot <span class="op">+</span><span class="st">    </span><span class="co"># the plot created in question 1 continued...</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;OHI score&quot;</span>,
       <span class="dt">y =</span> <span class="st">&quot;Number of countries&quot;</span>,
       <span class="dt">title =</span> <span class="st">&quot;Distribution of OHI scores&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_light</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.title =</span> <span class="kw">element_blank</span>(),
        <span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">45</span>, <span class="dt">hjust =</span> <span class="dv">1</span>, <span class="dt">size =</span> <span class="dv">14</span>),
        <span class="dt">axis.text.y =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">14</span>),
        <span class="dt">axis.title =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">16</span>)
        )</code></pre></div>
<p><strong>STOP: commit, pull and push to github</strong></p>
<p><strong>We will now continue with customizing your plot…..</strong></p>
<hr />
<p><br></p>
</div>
<div id="global-changes-to-plot-attributes" class="section level4">
<h4><span class="header-section-number">5.8.3.3</span> Global changes to plot attributes</h4>
<p>It is easy to make global changes to your plot’s appearance (these go outside the aes function). Here are some options:</p>
<ul>
<li><em>color</em> color of lines/points</li>
<li><em>fill</em> color within polygons</li>
<li><em>label</em> if points are a character</li>
<li><em>linetype</em> type of line</li>
<li><em>shape</em> style of point</li>
<li><em>alpha</em> transparency (0-1)</li>
<li><em>size</em> size of shape</li>
</ul>
<p>Here are the R shapes with their reference numbers:</p>
<div class="figure">
<img src="img/shapes.png" />

</div>
<p><br></p>
<p>Here are the R line types with their reference numbers:</p>
<div class="figure">
<img src="img/lines.png" />

</div>
<p><br></p>
<p>With this information, we can improve the appearance of one of our previous figures:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> ohi_summary, <span class="kw">aes</span>(<span class="dt">x =</span> georegions, <span class="dt">y =</span> OHI_score_average)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat=</span><span class="st">&quot;identity&quot;</span>, <span class="dt">fill =</span> <span class="st">&quot;lightgray&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_jitter</span>(<span class="dt">data=</span>ohi_data, <span class="kw">aes</span>(<span class="dt">x=</span>georegion_one, <span class="dt">y=</span>OHI_score), <span class="dt">color=</span><span class="st">&quot;red&quot;</span>, <span class="dt">size=</span><span class="dv">3</span>, <span class="dt">alpha=</span><span class="fl">0.3</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_bw</span>()</code></pre></div>
<p><img src="data-science-training_files/figure-html/fig_improve-1.png" width="672" /></p>
</div>
<div id="color" class="section level4">
<h4><span class="header-section-number">5.8.3.4</span> Color</h4>
<p>One of the more challenging aspects of creating a good plot is selecting colors. We are here to help!</p>
<p><strong>Hint 1</strong> Unless you are doing something very simple (e.g. 1-3 colors), I recommend using established color palettes. There are many color palette packages (here is a good resource: <a href="https://github.com/EmilHvitfeldt/r-color-palettes" class="uri">https://github.com/EmilHvitfeldt/r-color-palettes</a>), but one of the best known is <a href="http://colorbrewer2.org/#type=sequential&amp;scheme=BuGn&amp;n=3">RColorBrewer</a>.</p>
<p>Here we will explore using the RColorBrewer palettes.</p>
<p>Install the RColorBrewer and colorspace packages (only needs to be done once). Both RColorBrewer and colorspace have nice palettes and colorspace has additional functions for dealing with color.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">&quot;RColorBrewer&quot;</span>)
<span class="kw">install.packages</span>(<span class="st">&quot;colorspace&quot;</span>)</code></pre></div>
<p>Load packages into working space:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">&quot;RColorBrewer&quot;</span>)
<span class="kw">library</span>(<span class="st">&quot;colorspace&quot;</span>)</code></pre></div>
<p>To see the available palettes in RColorBrewer:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">display.brewer.all</span>()</code></pre></div>
<p><img src="data-science-training_files/figure-html/colorbrewer2-1.png" width="672" /></p>
<p>To select a palette:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_palette &lt;-<span class="st"> </span><span class="kw">brewer.pal</span>(<span class="dt">n=</span><span class="dv">9</span>, <span class="st">&quot;YlOrRd&quot;</span>)</code></pre></div>
<p><strong>Hint 2</strong> R uses hexidecimal to represent colors. Hexadecimal is a base-16 number system used to describe color. Red, green, and blue are each represented by two characters (#rrggbb). Each character has 16 possible symbols: 0,1,2,3,4,5,6,7,8,9,A,B,C,D,E,F</p>
<p>“00” can be interpreted as 0.0 and “FF” as 1.0, i.e., red= #FF0000 , black=#000000, white = #FFFFFF</p>
<p>Two additional characters (with the same scale) can be added to the end to describe transparency (#rrggbbaa)</p>
<p>A color palette is actually just a simple vector of hexidecimal values:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_palette</code></pre></div>
<pre><code>## [1] &quot;#FFFFCC&quot; &quot;#FFEDA0&quot; &quot;#FED976&quot; &quot;#FEB24C&quot; &quot;#FD8D3C&quot; &quot;#FC4E2A&quot; &quot;#E31A1C&quot;
## [8] &quot;#BD0026&quot; &quot;#800026&quot;</code></pre>
<p>I always use hexidecimal format for colors in R because it is the most direct approach. <br></p>
<p><strong>Hint 3</strong> The function you will want to use to specify color in ggplot2 depends on whether the color is mapped to a discrete/categorical data variable, or a continuous variable. There are a LOT of options in ggplot2, but these are the approaches I have settled on because they are the most flexible:</p>
<div class="figure">
<img src="img/color_R_ggplot_functions.png" />

</div>
<p><br></p>
<p>In the following case we map color to a continuous variable, so we will use the scale_color_gradientn function with the palette we selected above:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> ohi_data, <span class="kw">aes</span>(<span class="dt">x =</span> OHI_score, <span class="dt">y =</span> OHI_trend, <span class="dt">color =</span> HDI)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">size =</span><span class="dv">3</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_colour_gradientn</span>(<span class="dt">colors =</span> my_palette)</code></pre></div>
<p><img src="data-science-training_files/figure-html/palette_cont-1.png" width="672" /></p>
<p><br></p>
<p>This function takes a vector of colors and interpolates between the colors to get a gradient.</p>
<p>If we are mapping color to a discrete variable, we will use the scale_color_manual function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># lets use a discrete color scale</span>
my_palette &lt;-<span class="st"> </span><span class="kw">brewer.pal</span>(<span class="dt">n=</span><span class="dv">12</span>, <span class="st">&quot;Set3&quot;</span>)

<span class="kw">ggplot</span>(<span class="dt">data =</span> ohi_data, <span class="kw">aes</span>(<span class="dt">x =</span> OHI_score, <span class="dt">y =</span> HDI, <span class="dt">color =</span> georegion_one)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">size =</span> <span class="dv">3</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_color_manual</span>(<span class="dt">values =</span> my_palette)</code></pre></div>
<p><img src="data-science-training_files/figure-html/palette_discrete-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Note the first 7 of the 12 colors are used in the plot</span></code></pre></div>
<p>The scale_color_manual function also has a lot of great arguments that allow you to control which colors are associated with each factor level, the names used in the legend, and other controls.</p>
<p><strong>Hint 4</strong> If the “color” functions aren’t working, try the “fill” version of the function.</p>
<p><br></p>
<hr />
<blockquote>
<p><strong>Challenge</strong></p>
</blockquote>
<p>With all of this information in hand, please take a few minutes to create a plot using the fake dataset we will create below (or one of the other datasets we have worked with).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># making a fake dataframe</span>
fake_data &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">animal =</span> <span class="kw">rep</span>(<span class="kw">c</span>(<span class="st">&quot;cat&quot;</span>, <span class="st">&quot;dog&quot;</span>, <span class="st">&quot;hamster&quot;</span>), <span class="dt">each=</span><span class="dv">10</span>),
                        <span class="dt">year =</span> <span class="dv">2011</span><span class="op">:</span><span class="dv">2020</span>,
                        <span class="dt">values =</span> <span class="kw">c</span>(<span class="kw">rnorm</span>(<span class="dt">n=</span><span class="dv">10</span>, <span class="dv">5</span>, <span class="dv">1</span>) <span class="op">*</span><span class="st"> </span><span class="kw">seq</span>(<span class="fl">0.1</span>, <span class="fl">0.5</span>, <span class="dt">length.out=</span><span class="dv">10</span>),
                                   <span class="kw">rnorm</span>(<span class="dt">n=</span><span class="dv">10</span>, <span class="dv">8</span>, <span class="dv">1</span>) <span class="op">*</span><span class="st"> </span><span class="kw">seq</span>(<span class="fl">0.1</span>, <span class="fl">0.5</span>, <span class="dt">length.out=</span><span class="dv">10</span>),
                                   <span class="kw">rnorm</span>(<span class="dt">n=</span><span class="dv">10</span>, <span class="dv">10</span>, <span class="dv">1</span>) <span class="op">*</span><span class="st"> </span><span class="kw">seq</span>(<span class="fl">0.1</span>, <span class="fl">0.5</span>, <span class="dt">length.out=</span><span class="dv">10</span>)))

## Add your code to create a plot:</code></pre></div>
<p><strong>Answers (no peeking!)</strong></p>
<p>Here is one approach, but there is a lot more to do to make this really nice!</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggthemes)

<span class="kw">ggplot</span>(<span class="dt">data =</span> fake_data, <span class="kw">aes</span>(<span class="dt">x =</span> <span class="kw">as.factor</span>(year), <span class="dt">y =</span> values, <span class="dt">group=</span>animal, <span class="dt">color=</span>animal)) <span class="op">+</span><span class="st"> </span>
<span class="st">      </span><span class="kw">geom_point</span>(<span class="dt">size =</span> <span class="dv">3</span>) <span class="op">+</span>
<span class="st">      </span><span class="kw">geom_line</span>(<span class="dt">size=</span><span class="dv">2</span>, <span class="dt">alpha =</span> <span class="fl">0.5</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">      </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;year&quot;</span>, <span class="dt">color =</span> <span class="st">&quot;&quot;</span>) <span class="op">+</span>
<span class="st">      </span><span class="kw">theme_tufte</span>()</code></pre></div>
<hr />
<p><br></p>
</div>
</div>
</div>
<div id="saving-plots" class="section level2">
<h2><span class="header-section-number">5.9</span> Saving plots</h2>
<p>After creating your plot, use the <code>ggsave()</code> function to save your plot. This function allows you easily change the dimension, resolution, and format of your plot:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_plot &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> fake_data, <span class="kw">aes</span>(<span class="dt">x =</span> <span class="kw">as.factor</span>(year), <span class="dt">y =</span> values, <span class="dt">group=</span>animal, <span class="dt">color=</span>animal)) <span class="op">+</span><span class="st"> </span>
<span class="st">      </span><span class="kw">geom_point</span>(<span class="dt">size =</span> <span class="dv">3</span>) <span class="op">+</span>
<span class="st">      </span><span class="kw">geom_line</span>(<span class="dt">size=</span><span class="dv">2</span>, <span class="dt">alpha =</span> <span class="fl">0.5</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">      </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;year&quot;</span>, <span class="dt">color =</span> <span class="st">&quot;&quot;</span>) <span class="op">+</span>
<span class="st">      </span><span class="kw">theme_tufte</span>()

<span class="kw">ggsave</span>(<span class="st">&quot;name_of_file.png&quot;</span>, my_plot, <span class="dt">width =</span> <span class="dv">15</span>, <span class="dt">height =</span> <span class="dv">10</span>, <span class="dt">dpi=</span><span class="dv">300</span>)</code></pre></div>
<p><br> Note: The parameters <code>width</code> and <code>height</code> also determine the font size in the saved plot.</p>
</div>
<div id="arranging-plots" class="section level2">
<h2><span class="header-section-number">5.10</span> Arranging plots</h2>
<p>I am a huge fan of cowplots for making multiplot figures. Here is a nice <a href="https://cran.r-project.org/web/packages/cowplot/vignettes/introduction.html">introduction</a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">&quot;cowplot&quot;</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(cowplot)</code></pre></div>
<pre><code>## Error in library(cowplot): there is no package called &#39;cowplot&#39;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">score_vs_trend &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data=</span>ohi_data, <span class="kw">aes</span>(<span class="dt">x=</span>OHI_score, <span class="dt">y=</span>OHI_trend)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">size=</span><span class="dv">3</span>, <span class="dt">alpha=</span><span class="fl">0.4</span>)

score_vs_trend  <span class="co"># notice that the default theme has been changed....I really like this theme!</span></code></pre></div>
<p><img src="data-science-training_files/figure-html/cowplot-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">score_vs_HDI &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data=</span>ohi_data, <span class="kw">aes</span>(<span class="dt">x=</span>OHI_score, <span class="dt">y=</span>HDI)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">size=</span><span class="dv">3</span>, <span class="dt">alpha=</span><span class="fl">0.4</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_smooth</span>()

<span class="kw">plot_grid</span>(score_vs_trend, score_vs_HDI, <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&#39;A&#39;</span>, <span class="st">&#39;B&#39;</span>))</code></pre></div>
<pre><code>## Error in plot_grid(score_vs_trend, score_vs_HDI, labels = c(&quot;A&quot;, &quot;B&quot;)): could not find function &quot;plot_grid&quot;</code></pre>
</div>
<div id="interactive-plots" class="section level2">
<h2><span class="header-section-number">5.11</span> Interactive plots</h2>
<p>So as you can see, <code>ggplot2</code> is a fantastic package for visualizing data. But there are some additional packages that let you make plots interactive. <code>plotly</code>, <code>gganimate</code>. I use plotly all the time to check my data!</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">&quot;plotly&quot;</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(plotly)</code></pre></div>
<pre><code>## Error in library(plotly): there is no package called &#39;plotly&#39;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">score_vs_HDI &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data=</span>ohi_data, <span class="kw">aes</span>(<span class="dt">x=</span>OHI_score, <span class="dt">y=</span>HDI, <span class="dt">text=</span><span class="kw">paste0</span>(<span class="st">&quot;Country: &quot;</span>, country))) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">size=</span><span class="dv">3</span>, <span class="dt">alpha=</span><span class="fl">0.4</span>)

<span class="kw">ggplotly</span>(score_vs_HDI)</code></pre></div>
<pre><code>## Error in ggplotly(score_vs_HDI): could not find function &quot;ggplotly&quot;</code></pre>
</div>
<div id="save-and-push-to-github" class="section level2">
<h2><span class="header-section-number">5.12</span> Save and push to GitHub</h2>

</div>
</div>
<script src="lib/js/jquery.min.js"></script>
<script src="lib/js/bootstrap.min.js"></script>
<script src="lib/js/lesson.js"></script>
            </section>

          </div>
        </div>
      </div>
<a href="github.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="dplyr.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/OHI-Science/data-science-training/edit/master/ggplot2_mel.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["data-science-training.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
